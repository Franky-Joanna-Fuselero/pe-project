{% import 'components/core/forms' as forms %}
{% if generate %}
{{ forms.text(
    name:'code', 
    value: access_code,
    attributes:{
        'class':'font-mono w-full cursor-not-allowed rounded-md bg-gray-100 px-3 py-1.5 text-gray-400 outline-1 -outline-offset-1 outline-gray-300 sm:text-sm/6'
    }
)}}
<button 
    id="save-access-code-button"
    type="button" 
    hx-post="/exams/{{ exam.id }}/edit/generate_access_code" hx-select-oob="#save-access-code-button" hx-target="#code" hx-swap="outerHTML transition:true" hx-include="#code"
    hx-headers='{"X-CSRF-TOKEN": "{{ csrf_token() }}"}'
    class="cursor-pointer bg-green-900 text-xs text-white p-2 rounded hover:bg-green-700 transition">
    Save
</button>
{% else %}
<span id="code" class="font mono text-green-900 font-semibold text-xs p-2">
    {% if errors.has('access_code') %}
    <p class="text-red-500 text-sm">
        {{ errors.first('access_code') }}
    </p>
    {% else %}
    {{ access_code }} SAVED
    {% endif %}
</span>
<button id="save-access-code-button" type="button" class="hidden" disabled></button>
{% endif %}
